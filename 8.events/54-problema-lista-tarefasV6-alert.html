<!DOCTYPE html>
<html>
	<head>
		<title>Curso Javascript Completo 2018</title>
        <meta charset="utf-8">
        <style>
            
            body{
                font-family: sans-serif;
            }
            
            .done{
                text-decoration: line-through;
                color: red;
            }
        
        </style>
    </head>
    <body>
           <h1>Curso completo de Javascript - Problema - Lista de tarefas versao 6 - Alert excluir item</h1>
           
           <input type="text" id="txtTask"><br>
           <button id="btn">Cadastrar tarefa</button>
           
           <ul>
               <li>Estudar Javascript - DOM</li>
               <li>Estudar eventos</li>
               <li>Jogar video-game</li>
           </ul>
               
        <script>
            
            (function(){
                'use strict';
                
                var $txtTask = document.querySelector('#txtTask');
                var $btn = document.querySelector('#btn')
                var $ul = document.querySelector('ul');
                var $lis = $ul.querySelectorAll('li');
                
                $btn.addEventListener('click', addTask);
                $txtTask.addEventListener('keyup', function(e){
                    if(e.keyCode === 13){
                        addTask();
                    }
                });
                
                $ul.addEventListener('click', function(e){
                    if(e.target.nodeName === 'LI'){
                        removeTask(e.target);
                    }
                    
                });
                
                function toggleDone(li){
                    li.classList.toggle('done');
                    
                }
                
                function addTask(){
                    
                    var li = document.createElement('li');
                    
                    var text = document.createTextNode($txtTask.value);
                    
                    li.appendChild(text);
                    
                    $ul.appendChild(li);
                    
                    $txtTask.value = '';
                    $txtTask.focus();  
                }
                
                function removeTask(li){
                    
                    var excluir = confirm('Deseja realmente excluir a tarefa \n ' + li.textContent + ' ?');
                    
                    if(excluir){
                        li.parentNode.removeChild(li);
                    }
                }
         
            })();
              
        </script>
        
    </body>
</html>